var e=Object.defineProperty,l=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,r=(l,t,a)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a;import{d as u,e as m,t as s,f as p,r as n,o as i,c,a as f,C as b,D as y,k as V}from"./vendor.a308f217.js";import{c as g,d as _,e as F,f as M}from"./index.9c2b56da.js";var h=u({name:"Model",components:{},setup(){const e=m({active:"1",models:[],modelForm:{name:"",type:"",listtpl:"",contenttpl:"",status:"1"},rules:{name:[{required:!0,message:"请输入模型名称",trigger:"blur"}],type:[{required:!0,message:"请选择模型类型",trigger:"change"}],listtpl:[{required:!0,message:"请输入列表页模板",trigger:"blur"}],contenttpl:[{required:!0,message:"请输入内容页模板",trigger:"blur"}]},dialogStatus:!1,updateModelForm:{name:"",type:"",listtpl:"",contenttpl:"",status:"1"},updateModelName:""}),u=()=>{M().then((l=>{e.models=l})).catch((e=>{p.error(e.message+"| 出错了，请过会儿再试（半分钟左右）")}))};return u(),n=((e,l)=>{for(var t in l||(l={}))o.call(l,t)&&r(e,t,l[t]);if(a)for(var t of a(l))d.call(l,t)&&r(e,t,l[t]);return e})({},s(e)),l(n,t({getModels:u}));var n},methods:{addModel(){this.$refs.form.validate((async e=>{if(!e)return!1;try{await g(this.modelForm);p.success("添加成功"),this.getModels()}catch(l){p.error(l.message+"| 出错了，请过会儿再试（半分钟左右）")}}))},async deleteModel(e){try{await _(e),p.success("删除成功"),this.getModels()}catch(l){p.error(l.message+"| 出错了，请过会儿再试（半分钟左右）")}},openDialog(e){this.dialogStatus=!0,Object.keys(this.updateModelForm).forEach((l=>{this.updateModelForm[l]=e[l]})),this.updateModelName=e.name},async updateModel(){try{await F({findOption:{name:this.updateModelName},data:this.updateModelForm}),p.success("修改成功"),this.dialogStatus=!1,this.getModels()}catch(e){p.error(e.message+"| 出错了，请过会儿再试（半分钟左右）")}}}});const w=V("单页"),v=V("列表"),k=V("启用"),U=V("禁用"),O=V("修改"),C=V("删除"),j=V("启用"),S=V("禁用"),P=V("提交"),q=V("启用"),x=V("禁用"),D={class:"dialog-footer"},N=V("取 消"),z=V("确 定");h.render=function(e,l,t,a,o,d){const r=n("el-table-column"),u=n("el-tag"),m=n("el-button"),s=n("el-popconfirm"),p=n("el-table"),V=n("el-tab-pane"),g=n("el-input"),_=n("el-form-item"),F=n("el-option"),M=n("el-select"),h=n("el-radio"),E=n("el-form"),I=n("el-tabs"),$=n("el-dialog");return i(),c("div",null,[f(I,{modelValue:e.active,"onUpdate:modelValue":l[7]||(l[7]=l=>e.active=l),"tab-position":"top"},{default:b((()=>[f(V,{label:"模型列表",name:"1"},{default:b((()=>[f(p,{data:e.models,stripe:"",style:{width:"100%"}},{default:b((()=>[f(r,{prop:"id",label:"序号",width:"100"}),f(r,{prop:"name",label:"名称",width:"100"}),f(r,{prop:"type",label:"类型",width:"100"},{default:b((({row:e})=>["1"===e.type?(i(),c(u,{key:0,type:"success"},{default:b((()=>[w])),_:1})):(i(),c(u,{key:1,type:"primary"},{default:b((()=>[v])),_:1}))])),_:1}),f(r,{prop:"listtpl",label:"列表页模板"}),f(r,{prop:"contenttpl",label:"内容页模板"}),f(r,{prop:"status",label:"状态"},{default:b((({row:e})=>["1"===e.status?(i(),c(u,{key:0,type:"success"},{default:b((()=>[k])),_:1})):(i(),c(u,{key:1,type:"danger"},{default:b((()=>[U])),_:1}))])),_:1}),f(r,{label:"操作"},{default:b((({row:l})=>[f(m,{type:"primary",size:"small",onClick:t=>e.openDialog(l)},{default:b((()=>[O])),_:2},1032,["onClick"]),"1"!==l.issystem?(i(),c(s,{key:0,title:"确定删除吗？",onConfirm:t=>e.deleteModel(l.name)},{reference:b((()=>[f(m,{type:"danger",size:"small"},{default:b((()=>[C])),_:1})])),_:2},1032,["onConfirm"])):y("",!0)])),_:1})])),_:1},8,["data"])])),_:1}),f(V,{label:"新增模型",name:"2"},{default:b((()=>[f(E,{ref:"form",model:e.modelForm,rules:e.rules,"label-width":"120px"},{default:b((()=>[f(_,{label:"模型名称",prop:"name"},{default:b((()=>[f(g,{modelValue:e.modelForm.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.modelForm.name=l)},null,8,["modelValue"])])),_:1}),f(_,{label:"模型类型",prop:"type"},{default:b((()=>[f(M,{modelValue:e.modelForm.type,"onUpdate:modelValue":l[2]||(l[2]=l=>e.modelForm.type=l),placeholder:"请选择"},{default:b((()=>[f(F,{label:"单页",value:"1"}),f(F,{label:"列表",value:"2"})])),_:1},8,["modelValue"])])),_:1}),f(_,{label:"列表页模板",prop:"listtpl"},{default:b((()=>[f(g,{modelValue:e.modelForm.listtpl,"onUpdate:modelValue":l[3]||(l[3]=l=>e.modelForm.listtpl=l)},null,8,["modelValue"])])),_:1}),f(_,{label:"内容页模板",prop:"contenttpl"},{default:b((()=>[f(g,{modelValue:e.modelForm.contenttpl,"onUpdate:modelValue":l[4]||(l[4]=l=>e.modelForm.contenttpl=l)},null,8,["modelValue"])])),_:1}),f(_,{label:"状态"},{default:b((()=>[f(h,{modelValue:e.modelForm.status,"onUpdate:modelValue":l[5]||(l[5]=l=>e.modelForm.status=l),label:"1"},{default:b((()=>[j])),_:1},8,["modelValue"]),f(h,{modelValue:e.modelForm.status,"onUpdate:modelValue":l[6]||(l[6]=l=>e.modelForm.status=l),label:"0"},{default:b((()=>[S])),_:1},8,["modelValue"])])),_:1}),f(_,null,{default:b((()=>[f(m,{type:"primary",onClick:e.addModel},{default:b((()=>[P])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["modelValue"]),f($,{title:"修改模型",modelValue:e.dialogStatus,"onUpdate:modelValue":l[15]||(l[15]=l=>e.dialogStatus=l),width:"50%"},{footer:b((()=>[f("span",D,[f(m,{onClick:l[14]||(l[14]=l=>e.dialogStatus=!1)},{default:b((()=>[N])),_:1}),f(m,{type:"primary",onClick:e.updateModel},{default:b((()=>[z])),_:1},8,["onClick"])])])),default:b((()=>[f(E,{ref:"form",model:e.updateModelForm,rules:e.rules,"label-width":"120px"},{default:b((()=>[f(_,{label:"模型名称",prop:"name"},{default:b((()=>[f(g,{modelValue:e.updateModelForm.name,"onUpdate:modelValue":l[8]||(l[8]=l=>e.updateModelForm.name=l)},null,8,["modelValue"])])),_:1}),f(_,{label:"模型类型",prop:"type"},{default:b((()=>[f(M,{modelValue:e.updateModelForm.type,"onUpdate:modelValue":l[9]||(l[9]=l=>e.updateModelForm.type=l),placeholder:"请选择"},{default:b((()=>[f(F,{label:"单页",value:"1"}),f(F,{label:"列表",value:"2"})])),_:1},8,["modelValue"])])),_:1}),f(_,{label:"列表页模板",prop:"listtpl"},{default:b((()=>[f(g,{modelValue:e.updateModelForm.listtpl,"onUpdate:modelValue":l[10]||(l[10]=l=>e.updateModelForm.listtpl=l)},null,8,["modelValue"])])),_:1}),f(_,{label:"内容页模板",prop:"contenttpl"},{default:b((()=>[f(g,{modelValue:e.updateModelForm.contenttpl,"onUpdate:modelValue":l[11]||(l[11]=l=>e.updateModelForm.contenttpl=l)},null,8,["modelValue"])])),_:1}),f(_,{label:"状态"},{default:b((()=>[f(h,{modelValue:e.updateModelForm.status,"onUpdate:modelValue":l[12]||(l[12]=l=>e.updateModelForm.status=l),label:"1"},{default:b((()=>[q])),_:1},8,["modelValue"]),f(h,{modelValue:e.updateModelForm.status,"onUpdate:modelValue":l[13]||(l[13]=l=>e.updateModelForm.status=l),label:"0"},{default:b((()=>[x])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])};export default h;
