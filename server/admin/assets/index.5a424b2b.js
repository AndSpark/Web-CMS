var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,s=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&n(e,a,l[a]);if(t)for(var a of t(l))r.call(l,a)&&n(e,a,l[a]);return e};import{d as u,e as i,t as p,v as d,f as c,p as m,i as f,r as g,H as h,x as v,o as y,c as b,a as w,F as j,j as I,D as U,w as _,k as B}from"./vendor.a308f217.js";import{l as O}from"./index.9c2b56da.js";var V=u({name:"index",props:{modelValue:{type:String,required:!0},multiple:{type:Boolean,default:!1},file:{type:Boolean,default:!1},deleteBtn:{type:Boolean,default:!1}},setup(e,{emit:t}){const o=i({uploadUrl:"http://abc.le-so.cn:8082/api/upload",imgBaseUrl:location.protocol+"//"+location.hostname,uploading:!1}),{multiple:r,modelValue:n,file:u}=p(e),m=d((()=>u.value?"any":"image/png, image/jpeg")),f=d((()=>n.value.split(",").map((e=>({url:o.imgBaseUrl+e,origin:e,show:!!e}))).filter((e=>e.show)))),g=d((()=>{let e=O("token")||"";if(e)return{Authorization:e}})),h={onSuccess(e){o.uploading=!1;const l="/"+e.file.path.replace(/\\/g,"/");if(r.value){let e=",";n.value||(e=""),t("update:modelValue",n.value+e+l)}else t("update:modelValue",l)},handleBeforeUpload(){o.uploading=!0},handleImgUrlInput(e){t("update:modelValue",e)},handleError(){c.error("上传出错")},remove(e){let l;l=n.value.includes(","+e)?n.value.replace(","+e,""):n.value.replace(e,""),t("update:modelValue",l)}};return v=s(s({},p(o)),h),l(v,a({headers:g,showImgUrlList:f,accept:m}));var v}});const k=_();m("data-v-39a285b1");const x=B("点击上传");f();const P=k(((e,l,a,t,o,r)=>{const n=g("el-input"),s=g("el-button"),u=g("el-col"),i=g("el-row"),p=g("el-upload"),d=h("loading");return v((y(),b("div",null,[w(i,{gutter:20},{default:k((()=>[w(u,{span:12,offset:0},{default:k((()=>[w(n,{modelValue:e.modelValue,onInput:e.handleImgUrlInput},null,8,["modelValue","onInput"]),e.file?U("",!0):(y(),b(i,{key:0,gutter:20,class:"img-list"},{default:k((()=>[(y(!0),b(j,null,I(e.showImgUrlList,(l=>(y(),b(u,{span:8,offset:0,key:l.url,style:{position:"relative"}},{default:k((()=>[w("img",{src:l.url,style:{"max-height":"100px","margin-top":"20px"}},null,8,["src"]),e.deleteBtn?(y(),b(s,{key:0,onClick:a=>e.remove(l.origin),size:"mini",type:"danger",icon:"el-icon-delete",circle:""},null,8,["onClick"])):U("",!0)])),_:2},1024)))),128))])),_:1}))])),_:1}),w(u,{span:12,offset:0},{default:k((()=>[w(p,{headers:e.headers,action:e.uploadUrl,"on-success":e.onSuccess,"on-error":e.handleError,"show-file-list":!1,multiple:e.multiple,"before-upload":e.handleBeforeUpload,accept:e.accept},{default:k((()=>[w(s,{size:"small",type:"primary"},{default:k((()=>[x])),_:1})])),_:1},8,["headers","action","on-success","on-error","multiple","before-upload","accept"])])),_:1})])),_:1})],512)),[[d,e.uploading]])}));V.render=P,V.__scopeId="data-v-39a285b1";export{V as _};
