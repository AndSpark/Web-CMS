var e=Object.defineProperty,l=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(l,t,a)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a,r=(e,r)=>{for(var d in r||(r={}))t.call(r,d)&&o(e,d,r[d]);if(l)for(var d of l(r))a.call(r,d)&&o(e,d,r[d]);return e};import{d,e as n,t as m,f as s,p,i,r as u,o as c,c as f,a as b,l as x,F as y,j as g,w as _,k as F}from"./vendor.a308f217.js";import{_ as v,a as V,b as h}from"./extfield.21002b1f.js";import{f as E}from"./index.9c2b56da.js";var w=d({name:"ExtField",setup(){const e=n({models:[],extList:[],extForm:{mcode:"",name:"",type:"",value:"",description:"",sorting:255},originExtForm:{},activeName:"1",type:[{name:"单行文本",type:"1"},{name:"多行文本",type:"2"},{name:"编辑器",type:"8"}]});e.originExtForm=JSON.parse(JSON.stringify(e.extForm));const l={getExt(){v().then((l=>{e.extList=l}))},getModels(){E().then((l=>{e.models=l})).catch((e=>{s.error(e.message+"| 出错了，请过会几分钟再试")}))},getModelLabel(l){if(!e.models.length)return"";return e.models.find((e=>e.mcode===l)).name},addExt(){V(e.extForm).then((t=>{e.activeName="1",e.extForm=e.originExtForm,s.success("添加成功"),l.getExt()})).catch((e=>{s.error(e.message+"| 出错了，请过会几分钟再试")}))},reset(){e.extForm=e.originExtForm},deleteExt(e){h({id:e}).then((e=>{s.success("删除成功"),l.getExt()})).catch((e=>{s.error(e.message+"| 出错了，请过会几分钟再试")}))}};return l.getExt(),l.getModels(),r(r({},l),m(e))}});const j=_();p("data-v-55fa22f0");const O=F("删除"),k=F("立即提交"),C=F("重置");i();const N=j(((e,l,t,a,o,r)=>{const d=u("el-table-column"),n=u("el-button"),m=u("el-popconfirm"),s=u("el-table"),p=u("el-tab-pane"),i=u("el-option"),_=u("el-select"),F=u("el-form-item"),v=u("el-input"),V=u("el-form"),h=u("el-tabs");return c(),f("div",null,[b(h,{"tab-position":"top",modelValue:e.activeName,"onUpdate:modelValue":l[5]||(l[5]=l=>e.activeName=l)},{default:j((()=>[b(p,{label:"扩展字段列表",name:"1"},{default:j((()=>[b(s,{data:e.extList,style:{width:"100%"}},{default:j((()=>[b(d,{prop:"id",label:"序号"}),b(d,{prop:"mcode",label:"内容模型"},{default:j((({row:l})=>[b("p",null,x(e.getModelLabel(l.mcode)),1)])),_:1}),b(d,{prop:"description",label:"字段描述"}),b(d,{prop:"name",label:"字段名称"}),b(d,{prop:"type",label:"字段类型"},{default:j((({row:l})=>[b("p",null,x(e.type.find((e=>e.type===l.type))&&e.type.find((e=>e.type===l.type)).name),1)])),_:1}),b(d,{label:"操作"},{default:j((({row:l})=>[b(m,{title:"确定删除吗？",onConfirm:t=>e.deleteExt(l.id)},{reference:j((()=>[b(n,{type:"danger",size:"small"},{default:j((()=>[O])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])])),_:1}),b(p,{label:"扩展字段新增",name:"2"},{default:j((()=>[b(V,{ref:"form",model:e.extForm,"label-width":"120px"},{default:j((()=>[b(F,{label:"内容模型"},{default:j((()=>[b(_,{modelValue:e.extForm.mcode,"onUpdate:modelValue":l[1]||(l[1]=l=>e.extForm.mcode=l),placeholder:""},{default:j((()=>[(c(!0),f(y,null,g(e.models,(e=>(c(),f(i,{key:e.id,label:e.name,value:e.mcode},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(F,{label:"字段描述"},{default:j((()=>[b(v,{modelValue:e.extForm.description,"onUpdate:modelValue":l[2]||(l[2]=l=>e.extForm.description=l)},null,8,["modelValue"])])),_:1}),b(F,{label:"字段名称"},{default:j((()=>[b(v,{modelValue:e.extForm.name,"onUpdate:modelValue":l[3]||(l[3]=l=>e.extForm.name=l),placeholder:"请输入英文"},null,8,["modelValue"])])),_:1}),b(F,{label:"字段类型"},{default:j((()=>[b(_,{modelValue:e.extForm.type,"onUpdate:modelValue":l[4]||(l[4]=l=>e.extForm.type=l),placeholder:""},{default:j((()=>[(c(!0),f(y,null,g(e.type,(e=>(c(),f(i,{key:e.name,label:e.name,value:e.type},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(F,null,{default:j((()=>[b(n,{type:"primary",onClick:e.addExt},{default:j((()=>[k])),_:1},8,["onClick"]),b(n,{type:"warning",onClick:e.reset},{default:j((()=>[C])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue"])])}));w.render=N,w.__scopeId="data-v-55fa22f0";export default w;
